<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hamburger Debug Demo</title>
  <style>
    /* Minimal styles for demo */
    :root { --bg: #fff; --accent:#d4af37; --dark:#222; }
    body{ font-family:system-ui,Segoe UI,Roboto,Arial; margin:0; min-height:200vh; }
    .navbar{ position:fixed; top:0; left:0; right:0; height:64px; display:flex; align-items:center;
             justify-content:space-between; padding:0 1rem; background:rgba(255,255,255,0.95); z-index:1000;
             box-shadow:0 4px 12px rgba(0,0,0,0.06);}
    .logo{ font-weight:700; color:var(--dark); }
    /* Hamburger */
    .mobile-menu-toggle{ display:flex; gap:6px; flex-direction:column; padding:8px; border:0; background:transparent; cursor:pointer; z-index:1001;}
    .hamburger-line{ width:26px; height:3px; background:var(--dark); border-radius:3px; transition:all .3s; }
    .mobile-menu-toggle.active .hamburger-line:nth-child(1){ transform:rotate(45deg) translate(5px,6px); background:var(--accent); }
    .mobile-menu-toggle.active .hamburger-line:nth-child(2){ opacity:0; transform:translateX(-20px); }
    .mobile-menu-toggle.active .hamburger-line:nth-child(3){ transform:rotate(-45deg) translate(5px,-6px); background:var(--accent); }

    /* Overlay - DEFAULT hidden WITHOUT !important */
    .mobile-menu-overlay{
      position:fixed; inset:0; z-index:1002; background:rgba(255,255,255,0.98);
      transform:translateY(-12%); opacity:0; visibility:hidden; pointer-events:none;
      transition: transform .32s cubic-bezier(.2,.9,.2,1), opacity .28s ease;
      display:flex; align-items:center; justify-content:center;
    }
    .mobile-menu-overlay.active{
      transform:translateY(0); opacity:1; visibility:visible; pointer-events:auto;
    }
    .mobile-menu-content{ display:flex; flex-direction:column; gap:1rem; align-items:center; }
    .mobile-nav-link{ padding:12px 24px; border-radius:8px; text-decoration:none; color:var(--dark); background:transparent; font-size:18px; }
    .mobile-nav-link:hover{ background:rgba(212,175,55,0.08); color:var(--accent); }

    /* Responsive rules (small demo) */
    @media(min-width:768px){ .mobile-menu-toggle{ display:none; } .mobile-menu-overlay{ display:none; } }
    main{ padding-top:90px; }
  </style>
</head>
<body>
  <nav class="navbar" role="navigation" aria-label="Main nav">
    <div class="logo">Brand</div>
    <button id="mobileToggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="mobileOverlay" aria-label="Toggle menu">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </nav>

  <div id="mobileOverlay" class="mobile-menu-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Mobile menu">
    <div class="mobile-menu-content">
      <a href="#" class="mobile-nav-link">Home</a>
      <a href="#" class="mobile-nav-link">Projects</a>
      <a href="#" class="mobile-nav-link">About</a>
      <a href="#" class="mobile-nav-link">Contact</a>
    </div>
  </div>

  <main>
    <section style="padding:2rem;">
      <h1>Demo Page</h1>
      <p>Scroll and open the menu â€” it should lock scroll, be dismissible, and you should see console logs.</p>
      <p style="height:1000px;"></p>
    </section>
  </main>

  <script>
    console.log('hamburger demo script loaded'); // <--- if you don't see this, script didn't run

    document.addEventListener('DOMContentLoaded', function () {
      console.log('DOM ready');
      const toggle = document.getElementById('mobileToggle');
      const overlay = document.getElementById('mobileOverlay');
      const body = document.body;
      let lastScroll = 0;

      if (!toggle || !overlay) {
        console.error('Toggle or overlay missing:', !!toggle, !!overlay);
        return;
      }

      function setAria(open){
        toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        overlay.setAttribute('aria-hidden', open ? 'false' : 'true');
      }

      function lockScroll(){
        lastScroll = window.scrollY || window.pageYOffset;
        body.style.top = `-${lastScroll}px`;
        body.classList.add('menu-open');
      }
      function unlockScroll(){
        body.classList.remove('menu-open');
        body.style.top = '';
        window.scrollTo(0, lastScroll);
      }

      function openMenu(){
        console.log('openMenu()');
        toggle.classList.add('active');
        overlay.classList.add('active');
        setAria(true);
        lockScroll();
      }
      function closeMenu(){
        console.log('closeMenu()');
        toggle.classList.remove('active');
        overlay.classList.remove('active');
        setAria(false);
        unlockScroll();
        toggle.focus();
      }

      toggle.addEventListener('click', function (e) {
        e.preventDefault();
        if (toggle.classList.contains('active')) closeMenu();
        else openMenu();
      });

      // close on overlay background click:
      overlay.addEventListener('click', function (e) {
        if (e.target === overlay) closeMenu();
      });

      // close on link click:
      overlay.querySelectorAll('.mobile-nav-link').forEach(a => a.addEventListener('click', closeMenu));

      // close on escape:
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && overlay.classList.contains('active')) closeMenu();
      });

      // auto-close on resize beyond mobile:
      window.addEventListener('resize', () => {
        if (window.innerWidth >= 768 && overlay.classList.contains('active')) closeMenu();
      });

      // initial aria state
      setAria(false);
    });
  </script>
</body>
</html>
